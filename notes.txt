import { useParams } from 'react-router-dom';
import React, {useState, useEffect} from 'react';
import NavBar from '../components/nav_bar/NavBar';
import EditItemButton from '../components/nav_bar/EditItemButton';

export default function ItemPage() {

    let { itemID } = useParams();
    const [data, setData] = useState(1);
    const [tmpData, setTmpData] = useState();

    const [tmpitem, settmpItem] = useState();
    const [tmppurchasePrice, settmpPurchasePrice] = useState();
    const [tmpsoldPrice, settmpSoldPrice] = useState();
    const [tmptax, settmpTax] = useState();
    const [tmpshippingCost, settmpShippingCost] = useState();
    const [tmpprofit, settmpProfit] = useState();
    const [tmpammounttoCustomer, settmpAmmounttoCustomer] = useState();
    const [tmpnetProfit, settmpNetProfit] = useState();
    const [tmproi, settmpRoi] = useState();
    const [tmpdateSold, settmpDateSold] = useState();
    const [tmpnotes, settmpNotes] = useState();
    
    function setAllTmpData(data){
      settmpItem(data.result.description)
          settmpPurchasePrice(data.result.purchase_price)
          settmpSoldPrice(data.result.sold_price)
          settmpTax(data.result.tax)
          settmpShippingCost(data.result.shipping_cost)
          settmpProfit(data.result.profit)
          settmpAmmounttoCustomer(data.result.amount_due_to_customer)
          settmpNetProfit(data.result.net_profit)
          settmpRoi(data.result.roi)
          settmpDateSold(data.result.date_sold)
          settmpNotes(data.result.notes)
    }

    useEffect(() => {
      fetch(`http://127.0.0.1:8000/inventory_api/${itemID}`)
        .then(response => response.json())
        .then(json => {
          setData(json)
          setTmpData(json)
        })
    },[]);

    
    if(data.result == null){
      return(
        <div>
          <NavBar/>
        </div>
      )
    }
    return (
        <div style={{textAlign:'left'}}>
          <NavBar/>
          <p>Item ID: {data.result.id}</p>
          <p>Item: <input type ="text" value={tmpitem}/></p>
          <p>Purchase Price: $<input type='number' value={tmppurchasePrice}/></p>
          <p>Sold Price: $<input type='number' value={tmpsoldPrice}/></p>
          <p>Tax: $<input type='number' value={tmptax}/></p>
          <p>Shipping Cost: $<input type='number' value={tmpshippingCost}/></p>
          <p>Profit: $<input type='number' value={tmpprofit}/></p>
          <p>Amount Due to Customer: $<input type='number' value={tmpammounttoCustomer}/></p>
          <p>Net Profit: $<input type='number' value={tmpnetProfit}/></p>
          <p>ROI: <input type='number' value={tmproi}/></p>
          <p>Date Sold: <input type='data' value={tmpdateSold}/></p>
          <p>Notes: <input type='text' value={tmpnotes}/></p>
          <EditItemButton/>
        </div>
    );
  }